== 快搭
sudo gem install magpie

打开终端
> mag magpie.yml

magpie.yml文件用来配置你的商号信息, 假设你在支付宝有个账号:123456, key是:aaabbb, 网银在线有个账号:789789, key是:cccddd
那么你在magpie.yml中这样写:
alipay:
 -["123456", "aaabbb"]

chinabank:
 -["789789", "cccddd"]

mag命令默认会在本地9292端口启动http服务, 你可以用-p选项指定端口
mag -p 2010 magpie.yml

mag命令的详细帮助可以通过mag -h查看

=== 使用示例
  假设你正在实现支付宝支付的相关代码
  首先启动magpie服务
  > mag magpie.yml
  然后在你开发的商户系统中,将支付网关由支付宝的网关https://www.alipay.com/cooperate/gateway.do更改为magpie的网关http://127.0.0.1:9292/alipay
  如果你请求的参数出现错误,你可以通过magpie的日志看到详细的出错信息
  如果你的支付请求成功, magpie将会模拟支付宝的主动通知模式, 给你商户系统发送通知, 你需要确保你发送给magpie的notify_url是可用的,magpie将通过这个
  notify_url将支付成功的通知发到你的商户系统中, 这样你就可以避免去支付宝的页面进行真实的支付.

  对于网银在线, 将支付网关由网银在线的网关https://pay3.chinabank.com.cn/PayGate更改为magpie的网关http://127.0.0.1:9292/chinabank








